<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard - M∆THM∆TIΧ AI</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="landing-page-body">

  <header class="landing-header">
    <div class="header-logo-container">
      <img src="/images/mathmatix-ai-logo.png" alt="Mathmatix AI Logo" class="main-logo-hero" />
    </div>
    <nav class="landing-nav">
      <h1>Admin Dashboard</h1>
      <button id="logoutBtn" class="btn btn-tertiary">Log Out</button>
    </nav>
  </header>

  <main class="admin-page-wrapper">
    <div class="admin-main-content">

      <div class="admin-widget-sidebar">
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">System Status</div>
          <p>Database: <span id="dbStatus" class="status-online">Online</span></p>
          <p>AI Service: <span id="aiStatus" class="status-online">Operational</span></p>
          <p>Last Sync: <span id="lastSyncTime">Just now</span></p>
        </div>
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Top Students</div>
          <div class="table-scroll-container">
            <table id="leaderboardTable" class="user-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Name</th>
                  <th>Level</th>
                  <th>XP</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" style="text-align:center;">Loading...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="admin-central-content">
        <div class="dashboard-panel controls card-style-1">
          <div class="dashboard-panel-header">Teacher Assignment</div>
          <div class="form-group">
            <label for="teacherSelect">Assign selected students to:</label>
            <select id="teacherSelect"></select>
          </div>
          <button id="assignButton" class="submit-btn btn-primary">Assign</button>
        </div>

        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Student List</div>
          <div class="form-group">
            <input type="text" id="studentSearch" placeholder="Search students by name or email..." />
          </div>
          <div class="table-scroll-container">
            <table class="user-table">
              <thead>
                <tr>
                  <th><input type="checkbox" id="selectAllCheckbox" title="Select All"></th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Current Teacher</th>
                </tr>
              </thead>
              <tbody id="userTableBody">
                <tr><td colspan="5" style="text-align:center;">Loading students...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="admin-widget-sidebar">
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">User Summaries Access</div>
          <p>Quickly view detailed student and parent profiles.</p>
          <button class="main-action-btn btn btn-secondary">View All Summaries</button>
        </div>
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Quick Reports</div>
          <p>Generate usage and performance reports.</p>
          <button class="main-action-btn btn btn-secondary">Generate Report</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 M∆THM∆TIΧ AI. All rights reserved.</p>
    <p><a href="/privacy.html">Privacy Policy</a> | <a href="/terms.html">Terms of Use</a></p>
  </footer>

  <div id="studentDetailModal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close-button" id="closeModalButton">&times;</button>
      <h2 id="modalStudentName">Student Profile</h2>

      <div class="modal-section">
        <h3>General Information</h3>
        <form id="studentProfileForm">
          <input type="hidden" id="modalStudentId">
          <div class="modal-form-group"><label for="firstName">First Name:</label><input type="text" id="firstName" name="firstName"></div>
          <div class="modal-form-group"><label for="lastName">Last Name:</label><input type="text" id="lastName" name="lastName"></div>
          <div class="modal-form-group"><label for="username">Username:</label><input type="text" id="username" name="username" readonly></div>
          <div class="modal-form-group"><label for="email">Email:</label><input type="email" id="email" name="email"></div>
          <div class="modal-form-group"><label for="gradeLevel">Grade Level:</label><input type="text" id="gradeLevel" name="gradeLevel"></div>
          <div class="modal-form-group"><label for="mathCourse">Math Course:</label><input type="text" id="mathCourse" name="mathCourse"></div>
          <div class="modal-form-group"><label for="tonePreference">Tone Preference:</label><input type="text" id="tonePreference" name="tonePreference"></div>
          <div class="modal-form-group"><label for="learningStyle">Learning Style:</label><input type="text" id="learningStyle" name="learningStyle"></div>
          <div class="modal-form-group"><label for="interests">Interests (comma-separated):</label><input type="text" id="interests" name="interests"></div>
        </form>
      </div>

      <div class="modal-section">
        <h3>IEP Plan Accommodations</h3>
        <form id="studentIepForm">
          <div class="modal-form-group checkbox-group">
            <label><input type="checkbox" id="extendedTime" name="extendedTime"> Extended Time</label>
            <label><input type="checkbox" id="simplifiedInstructions" name="simplifiedInstructions"> Simplified Instructions</label>
            <label><input type="checkbox" id="frequentCheckIns" name="frequentCheckIns"> Frequent Check-ins</label>
            <label><input type="checkbox" id="visualSupport" name="visualSupport"> Visual Support</label>
            <label><input type="checkbox" id="chunking" name="chunking"> Chunking Information</label>
            <label><input type="checkbox" id="reducedDistraction" name="reducedDistraction"> Reduced Distraction</label>
            <label><input type="checkbox" id="mathAnxiety" name="mathAnxiety"> Math Anxiety</label>
          </div>
          <div class="modal-form-group"><label for="readingLevel">Reading Level (Grade):</label><input type="number" id="readingLevel" name="readingLevel" min="0" max="12" step="0.5"></div>
          <div class="modal-form-group"><label for="preferredScaffolds">Preferred Scaffolds (comma-separated):</label><input type="text" id="preferredScaffolds" name="preferredScaffolds"></div>
          <div class="modal-form-group" id="iepGoalsDisplay"><label>IEP Goals:</label><div id="iepGoalsList"></div></div>
        </form>
      </div>

      <div class="modal-section">
        <h3>Usage Statistics</h3>
        <div class="info-display-group"><strong>Total Tutoring Minutes:</strong> <span id="totalActiveTutoringMinutes"></span></div>
        <div class="info-display-group"><strong>Weekly Tutoring Minutes:</strong> <span id="weeklyActiveTutoringMinutes"></span></div>
        <div class="info-display-group"><strong>XP:</strong> <span id="xpDisplay"></span></div>
        <div class="info-display-group"><strong>Level:</strong> <span id="levelDisplay"></span></div>
        <div class="info-display-group"><strong>Last Login:</strong> <span id="lastLoginDisplay"></span></div>
        <div class="info-display-group"><strong>Account Created:</strong> <span id="createdAtDisplay"></span></div>
      </div>

      <div class="modal-section">
        <h3>Recent Conversation Summaries</h3>
        <div id="conversationSummariesList" class="conversation-list"></div>
      </div>

      <div class="modal-actions">
        <button class="save-button btn-primary" id="saveChangesButton">Save Changes</button>
        <button class="cancel-button btn-tertiary" id="cancelButton">Cancel</button>
      </div>
    </div>
  </div>

  <script src="/js/logout.js"></script>
  <script src="/js/admin-dashboard.js"></script>
</body>
</html>