{
  "moduleId": "functions_advanced",
  "course": "Algebra 2",
  "quarter": 1,
  "title": "Functions & Inverses",
  "estimatedDuration": 50,
  "skills": ["function-notation-composition", "inverse-functions", "transformations-functions"],
  "standardsAlignment": ["F-BF.1c", "F-BF.4", "F-IF.2", "F-BF.3"],
  "goals": [
    "Evaluate functions using function notation and perform function operations",
    "Find and verify composite functions (f of g of x)",
    "Determine and verify inverse functions algebraically and graphically",
    "Describe and apply transformations of parent functions"
  ],
  "instructionalStrategy": [
    "Use the 'machine' metaphor: f is a machine, you feed it x, it gives you f(x). Composition chains machines together.",
    "For inverses, emphasize the 'undo' concept: if f doubles, f-inverse halves. They cancel each other out.",
    "Transformations follow the 'inside vs. outside' rule: inside the function affects x (horizontal, opposite direction), outside affects y (vertical, same direction).",
    "Always verify inverses by showing f(f-inverse(x)) = x AND f-inverse(f(x)) = x."
  ],
  "aiFlexLevel": "high",
  "scaffold": [
    {
      "type": "explanation",
      "lessonPhase": "concept-intro",
      "text": "A **function** assigns exactly one output to each input. We write **f(x)** to mean 'the output of function f when the input is x.' This is NOT f times x—it's function notation.\n\n**Function Operations:**\n• (f + g)(x) = f(x) + g(x)\n• (f - g)(x) = f(x) - g(x)\n• (f · g)(x) = f(x) · g(x)\n• (f/g)(x) = f(x)/g(x), where g(x) ≠ 0\n\n**Composition:** (f ∘ g)(x) = f(g(x)) means 'plug g(x) into f.' The order matters—f(g(x)) is usually different from g(f(x)).",
      "initialPrompt": "If f(x) = 2x + 3 and g(x) = x², what is f(g(2))? Start by finding g(2), then plug that result into f."
    },
    {
      "type": "model",
      "lessonPhase": "i-do",
      "problem": "Given f(x) = 3x - 1 and g(x) = x² + 2, find (f ∘ g)(x) and (g ∘ f)(x).",
      "explanation": "**(f ∘ g)(x) = f(g(x)):**\nReplace every x in f with g(x):\nf(g(x)) = 3(x² + 2) - 1 = 3x² + 6 - 1 = **3x² + 5**\n\n**(g ∘ f)(x) = g(f(x)):**\nReplace every x in g with f(x):\ng(f(x)) = (3x - 1)² + 2 = 9x² - 6x + 1 + 2 = **9x² - 6x + 3**\n\nNotice: f(g(x)) ≠ g(f(x)). Composition is NOT commutative!",
      "initialPrompt": "Why are the two compositions different? What does this tell you about the order of operations in composition?"
    },
    {
      "type": "guided_practice",
      "lessonPhase": "we-do",
      "problems": [
        {
          "question": "If f(x) = x + 5 and g(x) = 2x - 3, find (f ∘ g)(4).",
          "answer": "10",
          "hints": ["First find g(4) = 2(4) - 3 = 5.", "Then f(g(4)) = f(5) = 5 + 5 = 10."]
        },
        {
          "question": "If f(x) = √x and g(x) = x + 9, find (f ∘ g)(x) and state the domain.",
          "answer": "(f ∘ g)(x) = √(x + 9); domain: x ≥ -9",
          "hints": ["f(g(x)) = f(x+9) = √(x+9).", "The expression under the radical must be ≥ 0: x + 9 ≥ 0, so x ≥ -9."]
        }
      ],
      "initialPrompt": "For the first problem, remember composition works inside-out. Start with the inner function g(4)."
    },
    {
      "type": "explanation",
      "lessonPhase": "concept-intro",
      "text": "An **inverse function** f⁻¹ 'undoes' what f does. If f(2) = 7, then f⁻¹(7) = 2.\n\n**To find f⁻¹(x):**\n1. Replace f(x) with y\n2. Swap x and y\n3. Solve for y\n4. Replace y with f⁻¹(x)\n\n**Verification:** f(f⁻¹(x)) = x AND f⁻¹(f(x)) = x\n\n**Graphically:** f and f⁻¹ are reflections over the line y = x.\n\n**Important:** Not all functions have inverses. A function has an inverse only if it's **one-to-one** (passes the horizontal line test).",
      "initialPrompt": "f(x) = 2x + 6. If f 'doubles and adds 6,' what should f-inverse do to undo it? Think about reversing the operations in reverse order."
    },
    {
      "type": "model",
      "lessonPhase": "i-do",
      "problem": "Find the inverse of f(x) = (3x - 5)/2.",
      "explanation": "**Step 1:** Replace f(x) with y: y = (3x - 5)/2\n**Step 2:** Swap x and y: x = (3y - 5)/2\n**Step 3:** Solve for y:\n2x = 3y - 5\n2x + 5 = 3y\ny = (2x + 5)/3\n**Step 4:** f⁻¹(x) = **(2x + 5)/3**\n\n**Verify:** f(f⁻¹(x)) = f((2x+5)/3) = (3·(2x+5)/3 - 5)/2 = (2x+5-5)/2 = 2x/2 = x ✓",
      "initialPrompt": "Can you verify the other direction: f⁻¹(f(x)) = x?"
    },
    {
      "type": "guided_practice",
      "lessonPhase": "we-do",
      "problems": [
        {
          "question": "Find the inverse of f(x) = 4x - 12.",
          "answer": "f⁻¹(x) = (x + 12)/4",
          "hints": ["Swap: x = 4y - 12. Solve: x + 12 = 4y, so y = (x+12)/4."]
        },
        {
          "question": "Does f(x) = x² have an inverse that is a function? Why or why not?",
          "answer": "No, because f(x) = x² fails the horizontal line test (e.g., f(2) = f(-2) = 4). If restricted to x ≥ 0, then yes.",
          "hints": ["Check the horizontal line test. Can two different inputs give the same output?", "f(2) = 4 and f(-2) = 4, so it's not one-to-one."]
        }
      ],
      "initialPrompt": "For the first problem, start by writing y = 4x - 12, then swap x and y."
    },
    {
      "type": "explanation",
      "lessonPhase": "concept-intro",
      "text": "**Function Transformations** modify a parent function's graph:\n\nGiven parent f(x):\n• **f(x) + k** — shift UP k units\n• **f(x) - k** — shift DOWN k units\n• **f(x - h)** — shift RIGHT h units (opposite!)\n• **f(x + h)** — shift LEFT h units (opposite!)\n• **a·f(x)** — vertical stretch (|a| > 1) or compression (0 < |a| < 1)\n• **f(bx)** — horizontal compression (|b| > 1) or stretch (0 < |b| < 1)\n• **-f(x)** — reflect over x-axis\n• **f(-x)** — reflect over y-axis\n\nThe 'inside/outside' rule: changes INSIDE the function affect x (horizontal, opposite direction). Changes OUTSIDE affect y (vertical, same direction).",
      "initialPrompt": "If f(x) = x², describe what g(x) = (x - 3)² + 2 looks like compared to f. Which way does it shift?"
    },
    {
      "type": "independent_practice",
      "lessonPhase": "you-do",
      "problems": [
        {
          "question": "Given f(x) = 2x + 1 and g(x) = x² - 3, find (f ∘ g)(x).",
          "answer": "2x² - 5",
          "hints": ["f(g(x)) = 2(x²-3) + 1 = 2x² - 6 + 1 = 2x² - 5."]
        },
        {
          "question": "Find the inverse of f(x) = (x + 7)/3.",
          "answer": "f⁻¹(x) = 3x - 7",
          "hints": ["Swap: x = (y+7)/3. Solve: 3x = y + 7, y = 3x - 7."]
        },
        {
          "question": "Verify that f(x) = 5x - 10 and g(x) = (x + 10)/5 are inverses.",
          "answer": "f(g(x)) = 5·(x+10)/5 - 10 = x + 10 - 10 = x ✓; g(f(x)) = (5x-10+10)/5 = x ✓",
          "hints": ["Compute f(g(x)) and g(f(x)). Both should equal x."]
        },
        {
          "question": "Describe the transformations: g(x) = -2(x + 1)² - 4 compared to f(x) = x².",
          "answer": "Shift left 1, vertical stretch by 2, reflect over x-axis, shift down 4",
          "hints": ["Inside: (x+1) = shift left 1. Outside: -2 = reflect and stretch by 2. -4 = shift down 4."]
        },
        {
          "question": "If f(3) = 8, what is f⁻¹(8)?",
          "answer": "3",
          "hints": ["The inverse 'undoes' the function. If f sends 3 to 8, f-inverse sends 8 back to 3."]
        }
      ],
      "attemptsRequired": 3
    }
  ],
  "answerKeys": {
    "(f ∘ g)(4) with f(x)=x+5, g(x)=2x-3": "10",
    "Inverse of f(x) = 4x - 12": "f⁻¹(x) = (x + 12)/4",
    "(f ∘ g)(x) with f(x)=2x+1, g(x)=x²-3": "2x² - 5",
    "Inverse of f(x) = (x+7)/3": "f⁻¹(x) = 3x - 7",
    "If f(3) = 8, what is f⁻¹(8)?": "3"
  }
}
