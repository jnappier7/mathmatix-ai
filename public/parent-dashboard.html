<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parent Dashboard | M∆THM∆TIΧ AI</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <div class="admin-page-wrapper">
    <header class="admin-header">
      <img src="/images/mathmatix-ai-logo.png" alt="Mathmatix AI Logo" />
      <h1>Parent Dashboard</h1>
      <button id="logoutBtn" class="logout-button">Logout</button>
    </header>

    <div class="admin-main-content">
      <div class="admin-widget-sidebar">
        <div class="dashboard-panel">
          <div class="dashboard-panel-header">Your Parent Account</div>
          <p>This section can show parent-specific stats or settings.</p>
        </div>
        <div class="dashboard-panel">
          <div class="dashboard-panel-header">Invite a Child</div>
          <button id="generate-code-btn" class="main-action-btn">Generate Invite Code</button>
          <div id="invite-code-output" style="display:none; margin-top: 15px; text-align: center;">
            <p class="text-sm font-semibold text-gray-700 mb-2">Share this code with your child:</p>
            <div class="bg-blue-100 text-blue-800 font-bold text-lg p-2 rounded-lg border-2 border-blue-300 text-center select-all">
              <span id="generated-code-value"></span>
            </div>
            <p class="text-xs text-gray-500 mt-2">Expires: <span id="code-expires-at"></span></p>
          </div>
        </div>

        <div class="dashboard-panel">
          <div class="dashboard-panel-header">Link to Existing Student</div>
          <form id="link-student-form" class="mt-4">
            <label for="studentLinkCode" class="block text-sm font-semibold text-gray-700 mb-2">Student's Link Code</label>
            <input type="text" id="studentLinkCode" name="studentLinkCode" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="Enter student's 6-character code" required>
            <button type="submit" class="submit-btn mt-4">Link Student</button>
            <div id="link-student-message" class="mt-2 text-sm text-center"></div>
          </form>
        </div>
        </div>

      <div class="admin-central-content">
        <div class="dashboard-panel">
          <div class="dashboard-panel-header">Your Linked Children</div>
          <div id="children-list-container">
            <p class="text-center text-gray-500 py-4" id="loading-children">Loading children...</p>
          </div>
        </div>

        <div class="dashboard-panel parent-chat-widget large-chat-panel"> <div class="dashboard-panel-header">Parent-Tutor Conference</div>
          <div class="chat-header-widget">
            <label for="childSelector" class="text-sm font-semibold text-gray-700">Discussing:</label>
            <select id="childSelector" class="text-sm p-1 border rounded"></select>
          </div>
          <div id="parent-chat-container-inner" class="chat-display-widget">
            <p class="text-gray-500 text-center py-2">Select a child to start discussing their progress.</p>
          </div>
          <div id="parent-thinking-indicator" style="display: none; justify-content: center; align-items: center; gap: 5px; padding: 5px 0; font-size: 0.85rem; color: #666;">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            <span>Mathmatix is thinking...</span>
          </div>
          <div class="chat-input-widget">
            <textarea id="parent-user-input" placeholder="Ask about your child’s learning..."></textarea>
            <button id="parent-send-button" class="submit-btn send-button-widget">Send</button>
          </div>
        </div>
        </div>

      <div class="admin-widget-sidebar">
        <div class="dashboard-panel">
          <div class="dashboard-panel-header">Settings & Notifications</div>
          <p>Manage your report frequency and preferences.</p>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>© 2025 M∆THM∆TIΧ AI. All rights reserved.</p>
    <p>
      <a href="/privacy.html">Privacy Policy</a> |
      <a href="/terms.html">Terms of Use</a>
    </p>
  </footer>

  <script src="/js/logout.js"></script>
  <script src="/js/parent-dashboard.js"></script> </body>
</html>