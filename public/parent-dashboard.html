<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parent Dashboard | M∆THM∆TIΧ AI</title>
  <link rel="stylesheet" href="/style.css" />
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" referrerpolicy="no-referrer" />
</head>
<body class="landing-page-body">
  <header class="landing-header">
    <div class="header-logo-container">
      <img src="/images/mathmatix-ai-logo.png" alt="Mathmatix AI Logo" class="main-logo-hero" />
    </div>
    <nav class="landing-nav">
      <h3 style="margin: 0; font-size: 1.4em;">Parent Dashboard</h3>
      <button id="logoutBtn" class="btn btn-tertiary">Logout</button>
    </nav>
  </header>

  <main class="admin-page-wrapper" style="padding: 20px; max-height: calc(100vh - var(--header-height) - var(--footer-height) - 40px); overflow-y: auto;">
    <div class="admin-main-content" style="align-items: flex-start;">
      <div class="admin-widget-sidebar">
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Your Parent Account</div>
          <p>This section can show parent-specific stats or settings.</p>
        </div>
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Invite a Child</div>
          <button id="generate-code-btn" class="main-action-btn btn btn-primary">Generate Invite Code</button>
          <div id="invite-code-output" style="display:none; margin-top: 15px; text-align: center;">
            <p class="text-sm font-semibold text-gray-700 mb-2">Share this code with your child:</p>
            <div class="bg-blue-100 text-blue-800 font-bold text-lg p-2 rounded-lg border-2 border-blue-300 text-center select-all">
              <span id="generated-code-value"></span>
            </div>
            <p class="text-xs text-gray-500 mt-2">Expires: <span id="code-expires-at"></span></p>
          </div>
        </div>

        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Link to Existing Student</div>
          <form id="link-student-form" class="mt-4">
            <label for="studentLinkCode" class="block text-sm font-semibold text-gray-700 mb-2">Student's Link Code</label>
            <input type="text" id="studentLinkCode" name="studentLinkCode" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="Enter student's 6-character code" required>
            <button type="submit" class="submit-btn btn-primary mt-4">Link Student</button>
            <div id="link-student-message" class="mt-2 text-sm text-center"></div>
          </form>
        </div>
        </div>

      <div class="admin-central-content">
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Your Linked Children</div>
          <div id="children-list-container">
            <p class="text-center text-gray-500 py-4" id="loading-children">Loading children...</p>
          </div>
        </div>

        <div class="dashboard-panel parent-chat-widget large-chat-panel card-style-1" style="border: 3px solid #9b59b6; background: linear-gradient(to bottom, #f8f5fb 0%, #ffffff 100%);">
          <div class="dashboard-panel-header" style="background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; padding: 15px; margin: -20px -20px 15px -20px; border-radius: 8px 8px 0 0;">
            <i class="fas fa-user-tie"></i> Parent-Teacher Conference
          </div>
          <div class="chat-header-widget" style="background: #f3e5f5; padding: 12px; border-radius: 6px; margin-bottom: 10px; border-left: 4px solid #9b59b6;">
            <label for="childSelector" class="text-sm font-semibold" style="color: #6a1b9a; display: block; margin-bottom: 5px;"><i class="fas fa-user-graduate"></i> Discussing Student:</label>
            <select id="childSelector" class="text-sm p-2 border rounded" style="width: 100%; border: 2px solid #9b59b6; border-radius: 6px;"></select>
          </div>
          <div id="parent-chat-container-inner" class="chat-display-widget" style="border: 2px solid #e1bee7; background: white; min-height: 300px; max-height: 400px; overflow-y: auto; padding: 15px; border-radius: 6px;">
            <p class="text-gray-500 text-center py-2"><i class="fas fa-comments"></i> Select a child to discuss their learning progress.</p>
          </div>
          <div id="parent-thinking-indicator" style="display: none; justify-content: center; align-items: center; gap: 5px; padding: 8px; font-size: 0.85rem; color: #8e44ad; background: #f3e5f5; border-radius: 6px; margin: 10px 0;">
            <span class="dot" style="background: #9b59b6;"></span><span class="dot" style="background: #9b59b6;"></span><span class="dot" style="background: #9b59b6;"></span>
            <span><i class="fas fa-spinner fa-spin"></i> Teacher AI is thinking...</span>
          </div>
          <div class="chat-input-widget" style="margin-top: 10px;">
            <textarea id="parent-user-input" placeholder="Ask about your child's learning progress, strengths, areas for improvement..." style="border: 2px solid #9b59b6; border-radius: 6px; min-height: 80px;"></textarea>
            <button id="parent-send-button" class="submit-btn send-button-widget" style="background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; border: none; padding: 12px 24px; border-radius: 6px; font-weight: bold; margin-top: 8px;"><i class="fas fa-paper-plane"></i> Send to Teacher</button>
          </div>
        </div>
        </div>

      <div class="admin-widget-sidebar">
        <div class="dashboard-panel card-style-1">
          <div class="dashboard-panel-header">Settings & Notifications</div>

          <form id="parent-settings-form" class="mt-4">
            <!-- Report Frequency -->
            <div class="form-group mb-4">
              <label for="reportFrequency" class="block text-sm font-semibold text-gray-700 mb-2">
                <i class="fas fa-calendar-alt"></i> Report Frequency
              </label>
              <select id="reportFrequency" name="reportFrequency" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="biweekly">Bi-weekly</option>
                <option value="monthly">Monthly</option>
              </select>
              <p class="text-xs text-gray-500 mt-1">How often you receive progress reports</p>
            </div>

            <!-- Goal View Preference -->
            <div class="form-group mb-4">
              <label for="goalViewPreference" class="block text-sm font-semibold text-gray-700 mb-2">
                <i class="fas fa-chart-line"></i> Dashboard View
              </label>
              <select id="goalViewPreference" name="goalViewPreference" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                <option value="progress">Progress Overview</option>
                <option value="gaps">Learning Gaps</option>
                <option value="goals">IEP Goals</option>
              </select>
              <p class="text-xs text-gray-500 mt-1">What you see first when viewing child progress</p>
            </div>

            <!-- Communication Tone -->
            <div class="form-group mb-4">
              <label for="parentTone" class="block text-sm font-semibold text-gray-700 mb-2">
                <i class="fas fa-comments"></i> Communication Tone
              </label>
              <select id="parentTone" name="parentTone" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                <option value="">Standard (default)</option>
                <option value="detailed">Detailed & Technical</option>
                <option value="simple">Simple & Concise</option>
                <option value="encouraging">Encouraging & Positive</option>
              </select>
              <p class="text-xs text-gray-500 mt-1">How the AI communicates with you</p>
            </div>

            <!-- Language Preference -->
            <div class="form-group mb-4">
              <label for="parentLanguage" class="block text-sm font-semibold text-gray-700 mb-2">
                <i class="fas fa-language"></i> Language
              </label>
              <input type="text" id="parentLanguage" name="parentLanguage" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" placeholder="English">
              <p class="text-xs text-gray-500 mt-1">Preferred language for reports</p>
            </div>

            <!-- Save Button -->
            <button type="submit" class="submit-btn btn-primary w-full">
              <i class="fas fa-save"></i> Save Settings
            </button>
            <div id="settings-save-message" class="mt-2 text-sm text-center"></div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 M∆THM∆TIΧ AI. All rights reserved. <a href="/privacy.html">Privacy Policy</a> | <a href="/terms.html">Terms of Use</a></p>
    <p class="edtech-pledge">Proud member of the EdTech Equity Pledge.</p>
  </footer>

  <script src="/js/logout.js"></script>
  <script src="/js/parent-dashboard.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>