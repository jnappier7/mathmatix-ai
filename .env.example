# ============================================
# MATHMATIX AI - LOCAL DEVELOPMENT ENVIRONMENT
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git (it's in .gitignore)

# --- DATABASE ---
MONGO_URI=mongodb://localhost:27017/mathmatix_dev
# OR use MongoDB Atlas for cloud:
# MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/mathmatix_dev

# --- SESSION SECRET ---
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=your_session_secret_here_generate_a_random_string

# --- GOOGLE OAUTH (Optional for local dev) ---
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# --- MICROSOFT OAUTH (Optional for local dev) ---
# Get from: https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps
MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret
MICROSOFT_CALLBACK_URL=http://localhost:3000/auth/microsoft/callback

# --- CLEVER SSO (Optional - for school district SSO) ---
# Get from: https://dev.clever.com/ (create a developer account)
# Free for app partners - used by ~77% of US K-12 schools
# Requires Clever certification for live district connections
CLEVER_CLIENT_ID=your_clever_client_id
CLEVER_CLIENT_SECRET=your_clever_client_secret
CLEVER_CALLBACK_URL=http://localhost:3000/auth/clever/callback

# --- AI SERVICES ---
# REQUIRED: Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your_openai_key_here

# REQUIRED: Anthropic (Claude) API Keys
# Get from: https://console.anthropic.com
# PRODUCTION KEY: For live user interactions (set higher spending limit)
ANTHROPIC_API_KEY_PROD=sk-ant-api03-your_production_key_here
# DEVELOPMENT KEY: For testing & Claude Code CLI (set lower spending limit)
ANTHROPIC_API_KEY_DEV=sk-ant-api03-your_development_key_here

# Which Anthropic key to use (based on NODE_ENV)
# In production: Uses ANTHROPIC_API_KEY_PROD
# In development: Uses ANTHROPIC_API_KEY_DEV
# Legacy fallback: ANTHROPIC_API_KEY (deprecated - migrate to environment-specific keys)
ANTHROPIC_API_KEY=sk-ant-api03-your_legacy_key_here

# --- VOICE / TEXT-TO-SPEECH ---
# TTS_PROVIDER controls which service is used: 'elevenlabs' (default) or 'cartesia'
TTS_PROVIDER=elevenlabs

# ElevenLabs (default) — Get from: https://elevenlabs.io/
ELEVENLABS_API_KEY=your_elevenlabs_key

# Cartesia (alternative — lower latency, lower cost)
# Get from: https://play.cartesia.ai/
CARTESIA_API_KEY=your_cartesia_key
# Model: 'sonic-2' (default, most capable) or 'sonic-3'
CARTESIA_MODEL=sonic-2

# --- MATH OCR (Mathpix) ---
# Get from: https://accounts.mathpix.com/
MATHPIX_APP_ID=your_mathpix_app_id
MATHPIX_APP_KEY=your_mathpix_app_key

# --- STRIPE BILLING ---
# MASTER SWITCH: Set to 'true' to activate billing, usage limits, and paywall.
# When false (or missing), all users get unlimited free access (pre-launch mode).
BILLING_ENABLED=false
# Get from: https://dashboard.stripe.com/apikeys
# Use test keys (pk_test_/sk_test_) for development, live keys for production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
# Get from: https://dashboard.stripe.com/webhooks (create endpoint for /api/billing/webhook)
# Events: checkout.session.completed, customer.subscription.deleted,
#          customer.subscription.updated, invoice.payment_failed
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret
# Packs: 60 min ($9.95, 90 day expiry), 120 min ($14.95, 180 day expiry),
#         Unlimited monthly ($19.95 recurring). Configured in routes/billing.js.

# --- SERVER CONFIGURATION ---
PORT=3000
NODE_ENV=development

# --- EMAIL SERVICE (Optional - for parent reports & notifications) ---
# Uncomment and configure to enable email features:
# - Weekly parent progress reports
# - Parental consent emails
# - Account notifications
#
# === SENDER ADDRESS CONFIGURATION ===
# These are SEPARATE from SMTP credentials - allows sending from your custom domain
# EMAIL_FROM=noreply@mathmatix.ai           # Sender address (shows in "From" field)
# EMAIL_FROM_NAME=MATHMATIX AI              # Display name (shows before email address)
# EMAIL_REPLY_TO=support@mathmatix.ai       # Where replies go (can be your real inbox)
#
# === SMTP PROVIDER OPTIONS ===
#
# OPTION 1: SendGrid (RECOMMENDED for production - 100 emails/day free)
# Sign up: https://signup.sendgrid.com/
# Steps: 1) Verify your domain (mathmatix.ai) in Settings > Sender Authentication
#        2) Create API key in Settings > API Keys
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=SG.your_sendgrid_api_key
# EMAIL_FROM=noreply@mathmatix.ai
# EMAIL_REPLY_TO=support@mathmatix.ai
# BASE_URL=https://mathmatix.ai
#
# OPTION 2: AWS SES (cheapest at scale - $0.10/1000 emails)
# Setup: Verify domain in SES console, create SMTP credentials
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=your_ses_smtp_username
# SMTP_PASS=your_ses_smtp_password
# EMAIL_FROM=noreply@mathmatix.ai
# EMAIL_REPLY_TO=support@mathmatix.ai
# BASE_URL=https://mathmatix.ai
#
# OPTION 3: Postmark (excellent deliverability, $15/mo for 10k emails)
# Sign up: https://postmarkapp.com/
# SMTP_HOST=smtp.postmarkapp.com
# SMTP_PORT=587
# SMTP_USER=your_postmark_server_token
# SMTP_PASS=your_postmark_server_token
# EMAIL_FROM=noreply@mathmatix.ai
# EMAIL_REPLY_TO=support@mathmatix.ai
# BASE_URL=https://mathmatix.ai
#
# OPTION 4: Gmail (testing only - NOT recommended for production)
# Requires: 2FA enabled, App Password generated at https://myaccount.google.com/apppasswords
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password
# EMAIL_FROM=your_email@gmail.com
# BASE_URL=http://localhost:3000

# ============================================
# QUICK START FOR LOCAL DEV (Minimal Config)
# ============================================
# To get started quickly, you only NEED:
# 1. MONGO_URI (local MongoDB or Atlas)
# 2. SESSION_SECRET (any random string)
# 3. OPENAI_API_KEY (for AI tutoring)
# 4. Dummy values for OAuth (if not testing Google/Microsoft login)
#
# The server will validate these on startup.
